<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>m2x-2.0.0.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/M2X.html">M2X</a></li>
                                <li><a href="../classes/M2X.device.html">M2X.device</a></li>
                                <li><a href="../classes/M2X.distribution.html">M2X.distribution</a></li>
                                <li><a href="../classes/M2X.key.html">M2X.key</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: m2x-2.0.0.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*    
 * Copyright (c) 2014 Samsung Electronics Co., Ltd.   
 * All rights reserved.   
 *   
 * Redistribution and use in source and binary forms, with or without   
 * modification, are permitted provided that the following conditions are   
 * met:   
 *   
 *     * Redistributions of source code must retain the above copyright   
 *        notice, this list of conditions and the following disclaimer.  
 *     * Redistributions in binary form must reproduce the above  
 *       copyright notice, this list of conditions and the following disclaimer  
 *       in the documentation and/or other materials provided with the  
 *       distribution.  
 *     * Neither the name of Samsung Electronics Co., Ltd. nor the names of its  
 *       contributors may be used to endorse or promote products derived from  
 *       this software without specific prior written permission.  
 *  
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  
 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR  
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT  
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,  
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT  
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE  
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

//Using almond&#x27;s way (https://github.com/jrburke/almond) to detect if 
//we can participate as a module if an AMD module is available
(function(root,factory) {
    if (typeof define === &#x27;function&#x27;) {
        if (define.amd) {
            //AMD loader
            define(factory);
        } else {
            //Are we dealing with Tizen core.js AMD loader?
            //Tizen core.js does not identifies itself as an AMD loader
            try {
                define({
                    name:&#x27;m2x&#x27;,
                    def: factory
                });
            } catch(e) {
                //Last resort, polluting global
                root.M2X = factory();
            }
        }
    } else {
        root.M2X = factory();
    }
}(this, function() {

    /**
     * Tizen JavaScript library for AT&amp;T M2X platform. This library will try to participate as a module if an AMD loader is available
     * @class M2X
     * @constructor
     * @param {Object} options A object containing the following properties&lt;/br&gt;
     * &lt;b&gt;key&lt;/b&gt;: M2X API key (String,required). Error will be thrown if key is not provided&lt;/br&gt;
     * &lt;b&gt;forward_errors&lt;/b&gt;: (Boolean).If true, errors will be forwarded to the successful callback (if provided)&lt;/br&gt;
     * 
     * Example:
     * 
     * 	var myM2X = new M2X({key:&#x27;yourm2xkeygoeshere&#x27;});
     * 
     * Unless stated otherwise, all functions in this library are asynchronous and a callback function should be provided. 
     * Callback signature
     * 
     * 	onSuccess(result) where result is an object with following attributes
     * 		result.status = HTTP code returned by M2X API
     * 		result.response = JSON encoded response.        
     * All functions accept an optional onError callback. Errors can be forwarded to the onSuccess callback by setting the &#x27;forward_errors&#x27; attribute to true in the constructor
     */
    var M2XAPI = function (options) {
        var 
        cfg = {
                base_end_point : &quot;https://api-m2x.att.com/v2&quot;,
                key : undefined,
                forward_errors : false
        }, 
        Utils = {
            /*
             * Checks if the argument is an object
             */
            isObj : function (obj) {
                return (Object.prototype.toString.call(obj) === &#x27;[object Object]&#x27;);
            },
            
            /*
             * Checks if argument is a function
             */
            isFunc : function (f) {
                return (typeof f === &#x27;function&#x27;);
            },
            
            /*
             * Checks if argument is an array
             */
            isArray : function (a) {
                return (Object.prototype.toString.call(a) === &#x27;[object Array]&#x27;);    	
            },
            
           /*
            * Checks if argument is a string
            */
            isString : function (s) {
                return (typeof s === &#x27;string&#x27;);
            },
            
            /*
             * Checks if argument is a Date object
             */
            isDate : function(d) {
                return (Object.prototype.toString.call(obj) === &#x27;[object Date]&#x27;);
            },
            
            /*
             * Checks if argument is an object and has the properties 
             * defined in arguments &#x60;props&#x60;
             */
            checkObjectHasProperties : function (obj,props) {
                if (!Utils.isObj(obj)) {
                    throw new Error(&quot;Parameter mismatch. &quot; + obj + &quot; is not an object&quot;);
                }
                props.forEach(function(prop) {
                    if (!obj.hasOwnProperty(prop) || typeof obj[prop] === &#x27;undefined&#x27; || Object.prototype.toString.call(obj[prop]) === &#x27;[object Null]&#x27;) {
                        throw new Error(&quot;Object must have a property &quot; + prop + &quot; and contain a valid value&quot;);
                    }
                });
            },

            /*
             * Formats a string. From SO (http://stackoverflow.com/a/4673436) 
             * with a tweak to encode URL params
             */		    
            formatURL : function() {
                var args = arguments;
                return args[0].replace(/\{(\d+)\}/g, function(match, number) { 
                  return typeof args[number] !== &#x27;undefined&#x27;
                    ? encodeURIComponent(args[number])
                    : match
                  ;
                });		    	
            }
        },
        api = {};
        
        if (typeof options === &#x27;undefined&#x27; || typeof options[&#x27;key&#x27;] === &#x27;undefined&#x27; || !Utils.isString(options[&#x27;key&#x27;])) {
            throw new Error(&quot;A valid M2X Key must be provided&quot;);
        }

        cfg.key = options.key;

        /*
         * HTTP requests handler
         */
        function request(args) {
            var xhr = new XMLHttpRequest(),
                url,
                param;

            if (typeof args.body !== &#x27;undefined&#x27;) {
                if (!Utils.isObj(args.body)) {
                    throw new Error(&quot;Request body should be an object&quot;);
                }
            }
                            
            url = cfg.base_end_point + args.path;

            if (Utils.isObj(args.urlparams)) {
                url +=  &quot;?&quot;;
                //Note: M2X will ignore invalid arguments
                for (param in args.urlparams) {
                    url += encodeURIComponent(param) + &quot;=&quot; + encodeURIComponent(args.urlparams[param]) + &quot;&amp;&quot;;
                }
                url = url.slice(0,-1);
            }
            
            xhr.open(args.verb,url,true);
            xhr.setRequestHeader(&quot;X-M2X-KEY&quot;,cfg.key);
            
            if (typeof args.body !== &#x27;undefined&#x27;) {
                //If body will be added to the request, content type should be set to JSON
                xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/json&quot;);
            } else {
                xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);
            }
            
            xhr.onreadystatechange = function() {
                var response;
                if (xhr.readyState === 4) {
                    if (!cfg.forward_errors) {
                        if (xhr.status === 200 || xhr.status === 201 || xhr.status === 202 || xhr.status === 204) {
                            if (Utils.isFunc(args.onSuccess)) {
                                response = {
                                    status : xhr.status,
                                    response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                                };
                                args.onSuccess.apply({}, [response]);
                            }					
                        } else {
                            if (Utils.isFunc(args.onError)) {
                                response = {
                                    status : xhr.status,
                                    response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                                };
                                args.onError.apply({},[response]);
                            }
                        }
                    } else {
                        if (Utils.isFunc(args.onSuccess)) {
                            response = {
                                status : xhr.status,
                                response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                            };
                            args.onSuccess.apply({}, [response]);
                        }
                    }
                }
            };
            
            xhr.send(JSON.stringify(args.body) || &#x27;&#x27;);
        }


        /**
         * M2X Device API facade
         * @class M2X.device
         *
         */
        api.device = {
            /**
             * Retrieve the list of devices accessible by the authenticated API key that meet the search criteria. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Search-Devices&quot;&gt;Search Devices&lt;/a&gt; for details.
             * @method search
             * @async
             * @param {Object} [options] Search options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            search : function (options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
                
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }
                request({verb:&quot;GET&quot;, path: &quot;/devices&quot;, urlparams : urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Retrieve the list of device tags for the authenticated user. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#List-Device-Tags&quot;&gt;List Device Tags&lt;/a&gt; for details.
             * @method searchDeviceTags
             * @async
             * @param {Object} [options] Search options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            searchDeviceTags : function (options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
                
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }
                request({verb:&quot;GET&quot;, path: &quot;/devices/tags&quot;, urlparams : urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Creates a new device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Create-Device&quot;&gt;Create Device&lt;/a&gt; for details.
             * @method create
             * @async
             * @param {Object} device Device object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            create : function (device,cbS,cbE) {
                Utils.checkObjectHasProperties(device,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                
                request({verb:&quot;POST&quot;, path: &quot;/devices&quot;, body: device, onSuccess: cbS, onError: cbE}); 
            },
            /**
             * Updates an existing Device&#x27;s information. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Update-Device-Details&quot;&gt;Update Device Details&lt;/a&gt; for details.
             * @method update
             * @async
             * @param {String} id Device ID
             * @param {Object} device Device object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            update : function (id,device,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }

                Utils.checkObjectHasProperties(device,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/devices/{1}&quot;,id), body: device, onSuccess: cbS, onError: cbE}); 
            },
            /**
             * Gets details of an existing Device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#View-Device-Details&quot;&gt;View Device Details&lt;/a&gt; for details.
             * @method getDetails
             * @async
             * @param {String} id Device ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDetails : function (id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}&quot;,id), onSuccess : cbS, onError: cbE});
            },
            /**
             * Gets location details of an existing Device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Read-Device-Location&quot;&gt;Read Device Location&lt;/a&gt; for details.
             * @method getLocation
             * @async
             * @param {String} id Device ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             * @
             */
            getLocation : function(id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/location&quot;,id), onSuccess : cbS, onError: cbE});
            },
            /**
             * Updates the current location of the specified device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Update-Device-Location&quot;&gt;Update Device Location&lt;/a&gt; for details.
             * @method updateLocation
             * @async
             * @param {String} id Device ID
             * @param {Object} location Location object. An error will be thrown if latitude(number) or longitude(number) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateLocation : function(id,location,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                Utils.checkObjectHasProperties(location,[&#x27;latitude&#x27;,&#x27;longitude&#x27;]);
                
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/devices/{1}/location&quot;,id), body : location, onSuccess : cbS, onError: cbE});
            },
            /**
             * Retrieves a list of data streams associated with the specified device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#List-Data-Streams&quot;&gt;List Data Streams&lt;/a&gt; for details.
             * @method getDataStreams
             * @async
             * @param {String} id Device ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreams : function(id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams&quot;,id), onSuccess : cbS, onError: cbE});	        	
            },
            /**
             * Updates a data stream associated with the specified device (if a stream with this name does not exist it gets created). See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Create-Update-Data-Stream&quot;&gt;Create/Update Data Stream&lt;/a&gt; for details.
             * @method updateStream
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name. No spaces or special characters allowed.
             * @param {Object} [stream] Create/Update parameters: unit and type. If no parameters are provided, stream type will be numeric by default and no unit will be associated to this stream.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateStream : function(id,name,stream,cbS,cbE) {
                
                var body = stream, 
                    onSuccess = cbS, 
                    onError = cbE;

                if (Utils.isFunc(stream)) {
                    body = {};
                    onSuccess = stream;
                    onError = cbS;
                }
                
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}&quot;,id,name), body : body, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Updates the current stream value of the specified stream. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Update-Data-Stream-Value&quot;&gt;Update Data Stream Value&lt;/a&gt; for details.
             * @method updateDataStreamValue
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Object} streamValue Should contain the &#x27;value&#x27; property with the new stream value. A timestamp can be optionally provided by adding the &#x27;timestamp&#x27; property in the object.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateDataStreamValue : function(id,name,streamValue,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }

                Utils.checkObjectHasProperties(streamValue,[&#x27;value&#x27;]);
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}/value&quot;,id,name), body : streamValue, onSuccess : cbS, onError: cbE});
            },
            /**
             * Gets details of a specific data stream associated with an existing device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#View-Data-Stream&quot;&gt;View Data Stream&lt;/a&gt; for details.
             * @method getDataStreamDetails
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreamDetails : function (id,name,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
            },
            /**
             * List values from an existing data stream associated with a specific device, sorted in reverse chronological order (most recent values first). See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#List-Data-Stream-Values&quot;&gt;List Data Stream Values&lt;/a&gt; for details.
             * @method getDataStreamValues
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Object} [options] Filter options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreamValues :  function(id,name,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
                
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }
                
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}/values.json&quot;,id,name), urlparams: urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Return count, min, max, average and standard deviation stats for the values on an existing data stream. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Data-Stream-Stats&quot;&gt;Data Stream Stats&lt;/a&gt; for details. &lt;br&gt;Note: This endpoint &lt;b&gt;only&lt;/b&gt; works for numeric streams.
             * @method getDataStreamStats
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Object} [options] Filter options. See https://m2x.att.com/developer/documentation/v2/device#Data-Stream-Stats for details
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreamStats : function(id,name,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
                
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }
                
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}/stats&quot;,id,name), urlparams: urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Posts timestamped values to an existing data stream associated with a specific device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Post-Data-Stream-Values&quot;&gt;Post Data Stream Values&lt;/a&gt; for details.
             * @method postDataStreamValues
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Array} values An array of objects. Each object should contain the attributes &#x27;timestamp&#x27; (in ISO8601 format) and &#x27;value&#x27;.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            postDataStreamValues : function(id,name,values,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                if (Utils.isArray(values)) {
                    values.forEach(function(v) {
                        Utils.checkObjectHasProperties(v,[&#x27;timestamp&#x27;,&#x27;value&#x27;]);
                    });
                } else {
                    throw new Error(&quot;Values should be an array of objects&quot;);
                }
                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}/values&quot;,id,name), body : {values: values}, onSuccess : cbS, onError: cbE});
            },
            /**
             * Deletes values in a stream by a date range. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Delete-Data-Stream-Values&quot;&gt;Delete Data Stream Values&lt;/a&gt; for details.
             * @method deleteDataStreamValues
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Object} range An object containing the date range. An error will be thrown if &#x27;from&#x27; (timestamp in ISO 8601 format) or &#x27;end&#x27; (timestamp in ISO 8601 format) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            deleteDataStreamValues :  function(id,name,parameters,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                Utils.checkObjectHasProperties(parameters,[&#x27;from&#x27;,&#x27;end&#x27;]);
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}/values&quot;,id,name), body : parameters, onSuccess : cbS, onError: cbE});
            },
            /**
             * Deletes an existing data stream associated with a specific device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Delete-Data-Stream&quot;&gt;Delete Data Stream&lt;/a&gt; for details.
             * @method deleteDataStream
             * @async
             * @param {String} id Device ID
             * @param {String} name Data stream name
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            deleteDataStream : function(id,name,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/devices/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
            },
            /**
             * Posts values to multiple streams at once. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Post-Device-Updates--Multiple-Values-to-Multiple-Streams-&quot;&gt;Post Device Updates(Multiple Values to Multiple Streams)&lt;/a&gt; for details.
             * @method postMultipleValues 
             * @async
             * @method postMultipleValues
             * @param {String} id Device ID 
             * @param {Object} values  An object with one attribute per each stream to be updated. The value of each one of these attributes is an array of timestamped values.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            postMultipleValues : function(id,values,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/devices/{1}/updates&quot;,id), body : {values: values}, onSuccess : cbS, onError: cbE});
            },
            /**
             * Retrieves a list of triggers associated with the specified device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#List-Triggers&quot;&gt;List Triggers&lt;/a&gt; for details.
             * @method getTriggers
             * @async
             * @param {String} id Device ID 
             * @param {Object} [options]  Search options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getTriggers : function(id,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
            
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }

                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers&quot;,id), urlparams: urlparams, onSuccess : onSuccess, onError: onError});	        	
            },
            /**
             * Creates a new trigger associated with the specified device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Create-Trigger&quot;&gt;Create Trigger&lt;/a&gt; for details.
             * @method createTrigger
             * @async
             * @param {String} id Device ID 
             * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            createTrigger : function(id,trigger,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }

                Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers&quot;,id), body : trigger, onSuccess : cbS, onError: cbE});
            },
            /**
             * Gets details of a specific trigger associated with an existing device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#View-Trigger&quot;&gt;View Trigger&lt;/a&gt; for details.
             * @method getTriggerDetails
             * @async
             * @param {String} id Device ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getTriggerDetails : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers/{2}&quot;,id,triggerId),onSuccess : cbS, onError: cbE});
            },
            /**
             * Updates an existing trigger associated with the specified device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Update-Trigger&quot;&gt;Update Trigger&lt;/a&gt; for details.
             * @method updateTrigger
             * @async
             * @param {String} id Device ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateTrigger : function(id,triggerId,trigger,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers/{2}&quot;,id,triggerId), body : trigger, onSuccess : cbS, onError: cbE});
            },
            /**
             * Tests the specified trigger by firing it with a fake value. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Test-Trigger&quot;&gt;Test Trigger&lt;/a&gt; for details.
             * @method testTrigger
             * @async
             * @param {String} id Device ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            testTrigger : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(triggerId)) {
                    throw new Error(&quot;Trigger ID should be an string&quot;);
                }

                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers/{2}/test&quot;,id,triggerId), onSuccess : cbS, onError: cbE});        	
            },
            /**
             * Deletes an existing trigger associated with a specific device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Delete-Trigger&quot;&gt;Delete Trigger&lt;/a&gt; for details.
             * @method deleteTrigger
             * @async
             * @param {String} id Device ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            deleteTrigger : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(triggerId)) {
                    throw new Error(&quot;Trigger ID should be an string&quot;);
                }
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/devices/{1}/triggers/{2}&quot;,id,triggerId), onSuccess: cbS, onError: cbE});
            },
            /**
             * Retrieves a list of HTTP requests received lately by the specified device (up to 100 entries). See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#View-Request-Log&quot;&gt;View Request Log&lt;/a&gt; for details.
             * @method getRequestsLog
             * @async
             * @param {String} id Device ID 
             * @param {Object} [options] Search options. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getRequestsLog :  function(id,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
        
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }

                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/devices/{1}/log&quot;,id), urlparams : urlparams, onSuccess: onSuccess, onError: onError});	        	
            },
            /**
             * Deletes an existing device. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/device#Delete-Device&quot;&gt;Delete Device&lt;/a&gt; for details.
             * @method remove
             * @async
             * @param {String} id Device ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            remove : function(id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;Device ID should be an string&quot;);
                }
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/devices/{1}&quot;,id), onSuccess: cbS, onError: cbE});
            }
        }

        /**
         * M2X Distribution API facade
         * @class M2X.distribution
         *
         */
        api.distribution = {
            /**
             * Retrieves list of device distributions accessible by the authenticated API key. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#List-Distributions&quot;&gt;List Distributions&lt;/a&gt; for details.
             * @method search
             * @async
             * @param {Object} [options] Search options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            search : function (options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
        
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }

                request({verb:&quot;GET&quot;, path: &quot;/distributions&quot;, urlparams : urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Creates a new device distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Create-Distribution&quot;&gt;Create Distribution&lt;/a&gt; for details.
             * @method create
             * @async
             * @param {Object} distribution Distribution object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            create : function (distribution,cbS,cbE) {
                Utils.checkObjectHasProperties(distribution,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                
                request({verb:&quot;POST&quot;, path: &quot;/distributions&quot;, body: distribution, onSuccess: cbS, onError: cbE}); 
            },
            /**
             * Retrieves information about an existing device distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#View-Distribution-Details&quot;&gt;View Distribution Details&lt;/a&gt; for details.
             * @method getDetails
             * @async
             * @param {String} id Distribution ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */            
            getDetails : function(id,cbS,cbE) {
                if (!Utils.isString(id)){
                    throw new Error(&quot;ID should be a string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}&quot;,id), onSuccess : cbS, onError: cbE});
            },
            /**
             * Updates an existing device distribution&#x27;s information. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Update-Distribution-Details&quot;&gt;Update Distribution Details&lt;/a&gt; for details.
             * @method update
             * @async
             * @param {String} id Distribution ID
             * @param {Object} distribution Distribution object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            update : function (id,distribution,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }

                Utils.checkObjectHasProperties(distribution,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/distributions/{1}&quot;,id), body: distribution, onSuccess: cbS, onError: cbE}); 
            },
            /**
             * Retrieves list of devices added to the specified distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#List-Devices-from-an-existing-Distribution&quot;&gt;List Devices from an existing Distribution&lt;/a&gt; for details.
             * @method getDevices
             * @async
             * @param {String} id Distribution ID
             * @param [Object] options Search parameters. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDevices : function(id,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;

                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }

                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}/devices&quot;,id), urlparams : urlparams, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Adds a new device to an existing distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Add-Device-to-an-existing-Distribution&quot;&gt;Add Device to an existing Distribution&lt;/a&gt; for details.
             * @method addDevice
             * @async
             * @param {String} id Distribution ID
             * @param {String} serial Device serial number.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            addDevice : function(id,serial,cbS,cbE) {

                if (!Utils.isString(id)) {
                    throw new Error(&quot;Distribution ID should be an string&quot;);
                }

                if (!Utils.isString(serial)) {
                    //Maybe a number was provided instead
                    if (Object.prototype.toString.call(serial) !== &quot;[object Number]&quot;) {
                        throw new Error(&quot;Device serial number not present or type mismatch&quot;);
                    } else if (isNaN(serial)) {
                        throw new Error(&quot;Device serial number type mismatch&quot;);
                    }
                }

                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/distributions/{1}/devices&quot;,id), body : {serial : serial}, onSuccess : cbS, onError: cbE});
            },            
            /**
             * Deletes an existing device distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Delete-Distribution&quot;&gt;Delete Distribution&lt;/a&gt; for details.
             * @method remove
             * @async
             * @param {String} id Distribution ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            remove : function(id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;Distribution ID should be an string&quot;);
                }

                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/distributions/{1}&quot;,id), onSuccess: cbS, onError: cbE});
            },
            /**
             * Retrieves a list of data streams associated with the specified distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#List-Data-Streams&quot;&gt;List Data Streams&lt;/a&gt; for details.
             * @method getDataStreams
             * @async
             * @param {String} id Distribution ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreams : function(id,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}/streams&quot;,id), onSuccess : cbS, onError: cbE});	        	
            },
            /**
             * Updates a data stream associated with the specified distribution (if a stream with this name does not exist it gets created). See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Create-Update-Data-Stream&quot;&gt;Create/Update Data Stream&lt;/a&gt; for details.
             * @method updateStream
             * @async
             * @param {String} id distribution ID
             * @param {String} name Data stream name. No spaces or special characters allowed.
             * @param {Object} [stream] Create/Update parameters: unit and type. If no parameters are provided, stream type will be numeric by default and no unit will be associated to this stream.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateStream : function(id,name,stream,cbS,cbE) {
                
                var body = stream, 
                    onSuccess = cbS, 
                    onError = cbE;

                if (Utils.isFunc(stream)) {
                    body = {};
                    onSuccess = stream;
                    onError = cbS;
                }
                
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/distributions/{1}/streams/{2}&quot;,id,name), body : body, onSuccess : onSuccess, onError: onError});
            },
            /**
             * Gets details of a specific data stream associated with an existing distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#View-Data-Stream&quot;&gt;View Data Stream&lt;/a&gt; for details.
             * @method getDataStreamDetails
             * @async
             * @param {String} id Distribution ID
             * @param {String} name Data stream name
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDataStreamDetails : function (id,name,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
            },
            /**
             * Deletes an existing data stream associated with a specific distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/distribution#Delete-Data-Stream&quot;&gt;Delete Data Stream&lt;/a&gt; for details.
             * @method deleteDataStream
             * @async
             * @param {String} id Distribution ID
             * @param {String} name Data stream name
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            deleteDataStream : function(id,name,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                    throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                }
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/distributions/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
            },
            /**
             * Retrieves a list of triggers associated with the specified distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#List-Triggers&quot;&gt;List Triggers&lt;/a&gt; for details.
             * @method getTriggers
             * @async
             * @param {String} id Distribution ID 
             * @param {Object} [options]  Search options.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getTriggers : function(id,options,cbS,cbE) {
                var urlparams = options,
                    onSuccess = cbS,
                    onError = cbE;
            
                if (Utils.isFunc(urlparams)) {
                    urlparams = {};
                    onSuccess = options;
                    onError = cbS;
                }

                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers&quot;,id), urlparams: urlparams, onSuccess : onSuccess, onError: onError});	        	
            },
            /**
             * Creates a new trigger associated with the specified distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Create-Trigger&quot;&gt;Create Trigger&lt;/a&gt; for details.
             * @method createTrigger
             * @async
             * @param {String} id Distribution ID 
             * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            createTrigger : function(id,trigger,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }

                Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers&quot;,id), body : trigger, onSuccess : cbS, onError: cbE});
            },
            /**
             * Gets details of a specific trigger associated with an existing distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#View-Trigger&quot;&gt;View Trigger&lt;/a&gt; for details.
             * @method getTriggerDetails
             * @async
             * @param {String} id Distribution ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getTriggerDetails : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers/{2}&quot;,id,triggerId),onSuccess : cbS, onError: cbE});
            },
            /**
             * Updates an existing trigger associated with the specified distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Update-Trigger&quot;&gt;Update Trigger&lt;/a&gt; for details.
             * @method updateTrigger
             * @async
             * @param {String} id Distribution ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            updateTrigger : function(id,triggerId,trigger,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers/{2}&quot;,id,triggerId), body : trigger, onSuccess : cbS, onError: cbE});
            },
            /**
             * Tests the specified trigger by firing it with a fake value. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Test-Trigger&quot;&gt;Test Trigger&lt;/a&gt; for details
             * @method testTrigger
             * @async
             * @param {String} id Distribution ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            testTrigger : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(triggerId)) {
                    throw new Error(&quot;Trigger ID should be an string&quot;);
                }

                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers/{2}/test&quot;,id,triggerId), onSuccess : cbS, onError: cbE});        	
            },
            /**
             * Deletes an existing trigger associated with a specific distribution. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/triggers#Delete-Trigger&quot;&gt;Delete Trigger&lt;/a&gt; for details.
             * @method deleteTrigger
             * @async
             * @param {String} id Distribution ID 
             * @param {String} trigger_id Trigger ID. 
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            deleteTrigger : function(id,triggerId,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;ID should be an string&quot;);
                }
                if (!Utils.isString(triggerId)) {
                    throw new Error(&quot;Trigger ID should be an string&quot;);
                }
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/distributions/{1}/triggers/{2}&quot;,id,triggerId), onSuccess: cbS, onError: cbE});
            }
        }

        /**
         * M2X Key API facade
         * @class M2X.key
         *
         */
        api.key = {
            /**
             * Retrieves list of keys associated with the specified account. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#List-Keys&quot;&gt;List Keys&lt;/a&gt; for details.
             * @method search
             * @async
             * @param {String} [deviceID]  If provided, it will list all the keys that are associated with that specific device or its streams
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            search : function(device,cbS,cbE) {
                var urlparams = {device : device},
                    onSuccess = cbS,
                    onError = cbE;
        
                if (Utils.isFunc(device)) {
                    urlparams = {};
                    onSuccess = device;
                    onError = cbS;
                }
        
                request({verb:&quot;GET&quot;, path: &quot;/keys&quot;, urlparams : urlparams, onSuccess: onSuccess, onError: onError});
            },
            /**
             * Creates a new key associated with the specified account. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#Create-Key&quot;&gt;Create Key&lt;/a&gt; for details.
             * @method create
             * @async
             * @param {Object} key Key object. An error will be thrown if name(String) or permissions(Array) are not provided.
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            create : function (key,cbS,cbE) {
                if (!Utils.isObj(key)) {
                    throw new Error(&quot;Key should be an object&quot;);
                }
        
                Utils.checkObjectHasProperties(key,[&#x27;name&#x27;,&#x27;permissions&#x27;]);
                
                request({verb:&quot;POST&quot;, path: &quot;/keys&quot;, body: key, onSuccess: cbS, onError: cbE}); 
            },
            /**
             * Gets details of a specific key associated with a developer account. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#View-Key-Details&quot;&gt;View Key Details&lt;/a&gt; for details.
             * @method getDetails
             * @async
             * @param {String} key Key ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             */
            getDetails : function(key,cbS,cbE) {
                if (!Utils.isString(key)) {
                    throw new Error(&quot;Key should be a String&quot;);
                }
        
                request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,key), onSuccess: cbS, onError: cbE});
            },
            /**
             * Update name, stream, permissions, expiration date, origin or device access of an existing key associated with the specified account. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#Update-Key&quot;&gt;Update Key&lt;/a&gt; for details.
             * @method update
             * @async
             * @param {String} key Key ID
             * @param {Object} key Key object. An error will be thrown if name(String) or permissions(Array) are not provided
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails
             *  
             * Note: Do not include &#x60;key&#x60; in the Key object. Otherwise, M2X will return
             * 		a 422(Unprocessable Entity) error with message &quot;Validation Failed&quot;,&quot;errors&quot;:{&quot;key&quot;:[&quot;unknown&quot;]}
             */
            update : function(id,key,cbS,cbE) {
                if (!Utils.isString(id)) {
                    throw new Error(&quot;Key should be a String&quot;);
                }
        
                Utils.checkObjectHasProperties(key,[&#x27;name&#x27;,&#x27;permissions&#x27;]);
                request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,id), body : key, onSuccess: cbS, onError: cbE});
            },
            /**
             * Regenerates the specified key. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#Regenerate-Key&quot;&gt;Regenerate Key&lt;/a&gt; for details.
             * @method regenerate
             * @async
             * @param {String} key Key ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails 
             */
            regenerate : function(id,cbS,cbE){
                if (!Utils.isString(id)) {
                    throw new Error(&quot;Key should be a String&quot;);
                }
        
                request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/keys/{1}/regenerate&quot;,id), onSuccess: cbS, onError: cbE});    		
            },
            /**
             * Deletes an existing key. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/keys#Delete-Key&quot;&gt;Delete Key&lt;/a&gt; for details.
             * @method remove
             * @async
             * @param {String} key Key ID
             * @param {Function} onSuccess Function to call back if operation is successful
             * @param {Function} [onError] Function to call back if operation fails 
             */
            remove : function(id,cbS,cbE){
                if (!Utils.isString(id)) {
                    throw new Error(&quot;Key should be a String&quot;);
                }
        
                request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,id), onSuccess: cbS, onError: cbE});
            }
        }

        /**
         * Updates the M2X API key currently used by this instance.
         * @method setKey
         * @for M2X
         * @param {String} key Key ID. An error will be thrown if key is not a string
         */
        api.setKey = function(key) {
            if (!Utils.isString(key)) {
                throw new Error(&quot;Key ID should be a String&quot;);
            }
                
            cfg.key = key;
        }
        
        return api;
   };
        
   /**
    * Creates a Date instance from a ISO8601 date. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/time&quot;&gt;time&lt;/a&gt; for details.
    * @method fromISO8601toDate 
    * @static
    * @for M2X
    * @param {String} timestamp A date in ISO8601 format
    * @return {Date} Date object if parameter is valid, undefined otherwise
    */
    M2XAPI.fromISO8601toDate = function(timestamp) {
        var ISO8601Format = /\d{4}\-\d{2}\-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/;
        if (ISO8601Format.test(timestamp)) {
            return new Date(timestamp);
        }
    };

    /**
     * Returns a date in ISO8601 format. See &lt;a href=&quot;https://m2x.att.com/developer/documentation/v2/time&quot;&gt;time&lt;/a&gt; for details.
     * @method getISO8601Timestamp 
     * @static
     * @for M2X
     * @param {Mixed} [timestamp] Either a Date instance or a number(integer)
     * @return {String} ISO8601 date. If no timestamp is provided, current time/date will be returned
     */    
    M2XAPI.getISO8601Timestamp = function(timestamp) {
        var t;
        if (Object.prototype.toString.call(timestamp) === &#x27;[object Date]&#x27; ) {
        	t = timestamp;
        } else if (/^[0-9]+$/.test(&#x27;&#x27;+timestamp)) {
            t = new Date(timestamp);
        } else {
            t = new Date();
        }
        return t.toISOString();
    };

    return M2XAPI;

}));
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
