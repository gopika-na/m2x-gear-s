<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>m2x.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-4 version">
            <em>API Docs for: Tizen JavaScript library for AT&T M2X platform</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/M2X.html">M2X</a></li>
            
                <li><a href="../classes/M2X.batch.html">M2X.batch</a></li>
            
                <li><a href="../classes/M2X.blueprint.html">M2X.blueprint</a></li>
            
                <li><a href="../classes/M2X.datasource.html">M2X.datasource</a></li>
            
                <li><a href="../classes/M2X.feed.html">M2X.feed</a></li>
            
                <li><a href="../classes/M2X.key.html">M2X.key</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: m2x.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*    
 * Copyright (c) 2014 Samsung Electronics Co., Ltd.   
 * All rights reserved.   
 *   
 * Redistribution and use in source and binary forms, with or without   
 * modification, are permitted provided that the following conditions are   
 * met:   
 *   
 *     * Redistributions of source code must retain the above copyright   
 *        notice, this list of conditions and the following disclaimer.  
 *     * Redistributions in binary form must reproduce the above  
 *       copyright notice, this list of conditions and the following disclaimer  
 *       in the documentation and/or other materials provided with the  
 *       distribution.  
 *     * Neither the name of Samsung Electronics Co., Ltd. nor the names of its  
 *       contributors may be used to endorse or promote products derived from  
 *       this software without specific prior written permission.  
 *  
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  
 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR  
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT  
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,  
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT  
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE  
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

//Using almond&#x27;s way (https://github.com/jrburke/almond) to detect if 
//we can participate as a module if an AMD module is available
(function(root,factory) {
	if (typeof define === &#x27;function&#x27;) {
		if (define.amd) {
			//AMD loader
			define(factory);
		} else {
			//Are we dealing with Tizen core.js AMD loader?
			//Tizen core.js does not identifies itself as an AMD loader
			try {
				define({
				    name:&#x27;m2x&#x27;,
				    def: factory
				});
			} catch(e) {
				//Last resort, polluting global
				root.M2X = factory();
			}
		}
	} else {
		root.M2X = factory();
	}
}(this, function() {

	/**
	 * Tizen JavaScript library for AT&amp;T M2X platform. This library will try to participate as a module if an AMD loader is available
	 * @class M2X
	 * @constructor
	 * @param {Object} options A object containing the following properties&lt;/br&gt;
	 * &lt;b&gt;key&lt;/b&gt;: M2X API key (String,required). Error will be thrown if key is not provided&lt;/br&gt;
	 * &lt;b&gt;api_version&lt;/b&gt;: M2X API version (Number(integer),optional). By default, will point to the latest stable M2X API version&lt;/br&gt;
	 * &lt;b&gt;forward_errors&lt;/b&gt;: (Boolean).If true, errors will be forwarded to the successful callback (if provided)&lt;/br&gt;
	 * 
	 * Example:
	 * 
	 * 	var myM2X = new M2X({key:&#x27;yourm2xkeygoeshere&#x27;});
	 * 
	 * Unless stated otherwise, all functions in this library are asynchronous and a callback function should be provided. 
	 * Callback signature
	 * 
	 * 	onSuccess(result) where result is an object with following attributes
	 * 		result.status = HTTP code returned by M2X API
	 * 		result.response = JSON encoded response.        
	 * All functions accept an optional onError callback. Errors can be forwarded to the onSuccess callback by setting the &#x27;forward_errors&#x27; attribute to true in the constructor
	 */
    var M2XAPI = function (options) {
        var 
        cfg = {
            	base_end_point : &quot;https://api-m2x.att.com/v1&quot;,
            	api_version : 1,
            	key : undefined,
            	forward_errors : false
        }, 
        Utils = {
			/*
		     * Checks if the argument is an object
		     */
		    isObj : function (obj) {
		        return (obj &amp;&amp; Object.prototype.toString.call(obj) === &#x27;[object Object]&#x27;);
		    },
		    
		    /*
		     * Checks if argument is a function
		     */
		    isFunc : function (f) {
		        return (f &amp;&amp; typeof f === &#x27;function&#x27;);
		    },
		    
		    /*
		     * Checks if argument is an array
		     */
		    isArray : function (a) {
		        return (a &amp;&amp; Object.prototype.toString.call(a) === &#x27;[object Array]&#x27;);    	
		    },
		    
		   /*
		    * Checks if argument is a string
		    */
		    isString : function (s) {
		    	return (s &amp;&amp; typeof s === &#x27;string&#x27;);
		    },
		    
		    /*
		     * Checks if argument is a Date object
		     */
		    isDate : function(d) {
		    	return (obj &amp;&amp; Object.prototype.toString.call(obj) === &#x27;[object Date]&#x27;);
		    },
		    
		    /*
		     * Checks if argument is an object and has the properties 
		     * defined in arguments &#x60;props&#x60;
		     */
		    checkObjectHasProperties : function (obj,props) {
		    	
		    	if (!Utils.isObj(obj)) {
		    		throw new Error(&quot;Parameter mismatch. &quot; + obj + &quot; is not an object&quot;);
		    	}
		        props.forEach(function(prop) {
		            if (!obj.hasOwnProperty(prop)) {
		                throw new Error(&quot;Object must have a property &quot; + prop);
		            }
		        });
		    },

		    /*
		     * Formats a string. From SO (http://stackoverflow.com/a/4673436) 
		     * with a tweak to encode URL params
		     */		    
		    formatURL : function() {
			    var args = arguments;
			    return args[0].replace(/\{(\d+)\}/g, function(match, number) { 
			      return typeof args[number] !== &#x27;undefined&#x27;
			        ? encodeURIComponent(args[number])
			        : match
			      ;
			    });		    	
		    }
        },
        api = {};
    	
        if (typeof options === &#x27;undefined&#x27; || typeof options[&#x27;key&#x27;] === &#x27;undefined&#x27; || !Utils.isString(options[&#x27;key&#x27;])) {
            throw new Error(&quot;A valid M2X Key must be provided&quot;);
        }

        cfg.key = options.key;

        //Checks if API version is really an int (http://stackoverflow.com/a/20455453)
        if (options[&#x27;api_version&#x27;] &amp;&amp; (options[&#x27;api_version&#x27;] === (options[&#x27;api_version&#x27;] | 0))) {
        	cfg.base_end_point = cfg.base_end_point.slice(0,-1) + ( &#x27;&#x27; + options[&#x27;api_version&#x27;]);
        	cfg.api_version = options[&#x27;api_version&#x27;];
    	}

        /*
         * HTTP requests handler
         */
        function request(args) {
            var xhr = new XMLHttpRequest(),
                url,
                param;

            if (typeof args.body !== &#x27;undefined&#x27;) {
                if (!Utils.isObj(args.body)) {
                    throw new Error(&quot;Request body should be an object&quot;);
                }
            }
                            
            url = cfg.base_end_point + args.path;

            if (Utils.isObj(args.urlparams)) {
            	url +=  &quot;?&quot;;
            	//Note: M2X will ignore invalid arguments
            	for (param in args.urlparams) {
            		url += encodeURIComponent(param) + &quot;=&quot; + encodeURIComponent(args.urlparams[param]) + &quot;&amp;&quot;;
            	}
            	url = url.slice(0,-1);
            }
            
            xhr.open(args.verb,url,true);
            xhr.setRequestHeader(&quot;X-M2X-KEY&quot;,cfg.key);
            
            if (typeof args.body !== &#x27;undefined&#x27;) {
            	//If body will be added to the request, content type should be set to JSON
                xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/json&quot;);
            } else {
            	xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);
            }
            
            xhr.onreadystatechange = function() {
            	var response;
                if (xhr.readyState === 4) {
                	if (!cfg.forward_errors) {
                        if (xhr.status === 200 || xhr.status === 201 || xhr.status === 202 || xhr.status === 204) {
                            if (Utils.isFunc(args.onSuccess)) {
                            	response = {
                            		status : xhr.status,
                            		response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                            	};
                                args.onSuccess.apply({}, [response]);
                            }					
                        } else {
                            if (Utils.isFunc(args.onError)) {
                            	response = {
                                    status : xhr.status,
                                    response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                                };
                                args.onError.apply({},[response]);
                            }
                        }
                	} else {
                        if (Utils.isFunc(args.onSuccess)) {
                        	response = {
                        		status : xhr.status,
                        		response : xhr.responseText ? JSON.parse(xhr.responseText) : {}
                        	};
                            args.onSuccess.apply({}, [response]);
                        }
                	}
                }
            };
            
        	xhr.send(JSON.stringify(args.body) || &#x27;&#x27;);
        }
        
        /**
         * M2X Blueprint API facade
         * @class M2X.blueprint
         * 
         */
        api.blueprint = {
        		/**
        		 * Retrieves list of data source blueprints accessible by the authenticated API key.
        		 * @method search
        		 * @async
        		 * @param {Object} [options] Search options (check https://m2x.att.com/developer/documentation/datasource for details). These options will be added to the URL
        		 * @param {Function} onSuccess Function to call back if operation is successful
        		 * @param {Function} [onError] Function to call back if operation fails
        		 */
	        	search : function(options,cbS,cbE) {
	    	        var onSuccess = cbS,
	    	        	onError = cbE;
	    	            
	    	        if (Utils.isFunc(options)) {
	    	        	onSuccess = options;
	    	        	if (Utils.isFunc(cbS)) {
	    	        		onError = cbS;
	    	        	}
	    	        }

	    	        request({verb:&quot;GET&quot;, path: &quot;/blueprints&quot;, urlparams : options, onSuccess : onSuccess, onError: onError});
	    	    },
	    	    /**
	    	     * Creates a new data source blueprint.
	    	     * @method create
	    	     * @async
	    	     * @param {Object} blueprint Blueprint object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
	    	     */
	        	create : function(blueprint,cbS,cbE) {
	    	        
	    	        Utils.checkObjectHasProperties(blueprint,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
	    	        
	    	        request({verb:&quot;POST&quot;, path: &quot;/blueprints&quot;, body: blueprint, onSuccess: cbS, onError: cbE}); 
	    	    },
	    	    /**
	    	     * Retrieves information about an existing data source blueprint.
	    	     * @method getDetails
	    	     * @async
	    	     * @param {String} id Data source blueprint ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
	    	     */
	    	    getDetails : function(id,cbS,cbE) {
	    	    	if (!Utils.isString(id)) {
	    	    		throw new Error(&quot;ID should be an string&quot;);
	    	    	}
	    	    	request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/blueprints/{1}&quot;,id), onSuccess : cbS, onError: cbE});
	    	    },
	    	    /**
	    	     * Updates an existing data source blueprint&#x27;s information.
	    	     * @method update
	    	     * @async
	    	     * @param {String} id Data source blueprint ID
	    	     * @param {Object} blueprint Blueprint object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
	    	     * 
	    	     */
	    	    update : function (id,blueprint,cbS,cbE) {
	    	    	if (!Utils.isString(id)) {
	    	    		throw new Error(&quot;ID should be an string&quot;);
	    	    	}
	    	        
	    	        Utils.checkObjectHasProperties(blueprint,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
	    	        
	    	        request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/blueprints/{1}&quot;,id), body: blueprint, onSuccess: cbS, onError: cbE}); 
	    	    },
	    	    /**
	    	     * Deletes an existing data source blueprint.
	    	     * @method remove
	    	     * @async
	    	     * @param {String} id Data source blueprint ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
	    	     */
	    	    remove : function(id,cbS,cbE) {
	    	    	request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/blueprints/{1}&quot;,id), onSuccess: cbS, onError: cbE});
	    	    }
        }

        /**
         * M2X Batch API facade
         * @class M2X.batch
         * 
         */        
        api.batch = {
        		/**
        		 * Retrieves list of data source batches accessible by the authenticated API key.
        		 * @method search
        		 * @async
        		 * @param {Object} [options] Search options (check https://m2x.att.com/developer/documentation/datasource for details). These options will be added to the URL
        		 * @param {Function} onSuccess Function to call back if operation is successful
        		 * @param {Function} [onError] Function to call back if operation fails 
        		 */
                search : function (options,cbS,cbE) {
                    var onSuccess = cbS,
                        onError = cbE;
                    
                    if (Utils.isFunc(options)) {
                        onSuccess = options;
                        if (Utils.isFunc(cbS)) {
                            onError = cbS;
                        }
                    }
                    request({verb:&quot;GET&quot;, path: &quot;/batches&quot;, urlparams : options, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Creates a new data source batch.
                 * @method create
                 * @async
                 * @param {Object} batch Batch object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                create : function(batch,cbS,cbE) {
                    
                    Utils.checkObjectHasProperties(batch,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                    
                    request({verb:&quot;POST&quot;, path: &quot;/batches&quot;, body: batch, onSuccess: cbS, onError: cbE}); 
                },
                /**
                 * Retrieves information about an existing data source batch.
                 * @method getDetails
                 * @async
                 * @param {String} id Data source batch ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails 
                 */
                getGetails : function(id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }

                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/batches/{1}&quot;,id), onSuccess : cbS, onError: cbE});
                },
                /**
                 * Updates an existing data source batch&#x27;s information
                 * @method update
                 * @async
                 * @param {String} id Data source batch ID
                 * @param {Object} batch Batch object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                update : function(id,batch,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }

                    Utils.checkObjectHasProperties(batch,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                    
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/batches/{1}&quot;,id), body: batch, onSuccess: cbS, onError: cbE}); 
                },
                /**
                 * Retrieves list of data sources added to the specified batch.
                 * @method getDataSources
                 * @async
                 * @param {String} id Data source batch ID
                 * @param [Object] options Search parameters. 
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDataSources : function(id,options,cbS,cbE) {
                    
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;Batch ID should be an string&quot;);
                    }

                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/batches/{1}/datasources&quot;,id), urlparams : options, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Adds a new data source to an existing batch.
                 * @method addDataSource
                 * @async
                 * @param {String} id Data source batch ID
                 * @param {String} serial Data source serial.
                 * @param {String} [base_feed_id] If provided, all data sources attached to this batch will be based on the referenced base feed.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                addDataSource : function(id,serial,base,cbS,cbE) {
                	var urlparams = {base_feed : base},
                		onSuccess = cbS, 
                		onError = cbE;

                	if (!Utils.isString(id)) {
                        throw new Error(&quot;Batch ID should be an string&quot;);
                    }

                	if (typeof serial === &quot;undefined&quot;) {
                    	throw new Error(&quot;Data source serial number is required&quot;);
                    }
                	
                	if (Utils.isFunc(base)) {
                		urlparams = {};
                		onSuccess = base;
                		onError = cbS;
                	}

                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/batches/{1}/datasources&quot;,id), body : {serial : serial}, urlparams: urlparams, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Deletes an existing data source batch.
                 * @method remove
                 * @async
                 * @param {String} id Data source batch ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                remove : function(id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;Batch ID should be an string&quot;);
                    }

                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/batches/{1}&quot;,id), onSuccess: cbS, onError: cbE});
                }
        }
        /**
         * M2X Data source API facade
         * @class M2X.datasource
         *
         */
        api.datasource = {
        		/**
        		 * Retrieves list of data sources accessible by the authenticated API key.
        		 * @method search
        		 * @async
        		 * @param {Object} [options] Search options. See https://m2x.att.com/developer/documentation/datasource#List-Data-Sources for details.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
        		 */
                search : function (options,cbS,cbE) {
                    var onSuccess = cbS,
                        onError = cbE;
                    
                    if (Utils.isFunc(options)) {
                        onSuccess = options;
                        if (Utils.isFunc(cbS)) {
                            onError = cbS;
                        }
                    }
                    request({verb:&quot;GET&quot;, path: &quot;/datasources&quot;, urlparams : options, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Creates a new data source
                 * @method create
                 * @async
                 * @param {Object} datasource Data source object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                create : function (datasource,cbS,cbE) {
                    Utils.checkObjectHasProperties(datasource,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                    
                    request({verb:&quot;POST&quot;, path: &quot;/datasources&quot;, body: datasource, onSuccess: cbS, onError: cbE}); 
                },
                /**
                 * Retrieves information about an existing data source.
                 * @method getDetails
                 * @async
                 * @param {String} id Data source ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDetails : function (id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/datasources/{1}&quot;,id), onSuccess : cbS, onError: cbE});
                },
                /**
                 * Updates an existing data source&#x27;s information
                 * @method update
                 * @async
                 * @param {String} id Data source ID
                 * @param {Object} datasource Data source object. An error will be thrown if name(String) or visibility(either &#x27;public&#x27; or &#x27;private&#x27;) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                update : function (id,datasource,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }

                    Utils.checkObjectHasProperties(datasource,[&#x27;name&#x27;,&#x27;visibility&#x27;]);
                    
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/datasources/{1}&quot;,id), body: datasource, onSuccess: cbS, onError: cbE}); 
                },
                /**
                 * Deletes an existing data source.
                 * @method remove
                 * @async
                 * @param {String} id Data source ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                remove : function(id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;DataSource ID should be an string&quot;);
                    }
                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/datasources/{1}&quot;,id), onSuccess: cbS, onError: cbE});
                }
        }

        /**
         * M2X Feed API facade
         * @class M2X.feed
         *
         */
        api.feed = {
        		/**
        		 * Retrieves the list of feeds accessible by the authenticated API key that meet the search criteria.
        		 * @method search
        		 * @async
        		 * @param {Object} [options]. Search options. See https://m2x.att.com/developer/documentation/feed#List-Search-Feeds for details.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails

        		 */
                search : function (options,cbS,cbE) {
                    var onSuccess = cbS,
                        onError = cbE;
                    
                    if (Utils.isFunc(options)) {
                        onSuccess = options;
                        if (Utils.isFunc(cbS)) {
                            onError = cbS;
                        }
                    }
                    request({verb:&quot;GET&quot;, path: &quot;/feeds&quot;, urlparams : options, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Gets details of an existing feed.
                 * @method getDetails
                 * @async
                 * @param {String} id Feed ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */ 
                getDetails : function (id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}&quot;,id), onSuccess : cbS, onError: cbE});
                },
                /**
                 * Gets location details of the datasource associated with a specific feed.
                 * @method getLocation
                 * @async
                 * @param {String} id Feed ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 * @
                 */
                getLocation : function(id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/location&quot;,id), onSuccess : cbS, onError: cbE});
                },
                /**
                 * Updates the current location of the datasource associated with the specified feed.
                 * @method updateLocation
                 * @async
                 * @param {String} id Feed ID
                 * @param {Object} location Location object. An error will be thrown if latitude(number) or longitude(number) are not provided. See https://m2x.att.com/developer/documentation/feed#Update-Datasource-Location for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                updateLocation : function(id,location,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    Utils.checkObjectHasProperties(location,[&#x27;latitude&#x27;,&#x27;longitude&#x27;]);
                    
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/feeds/{1}/location&quot;,id), body : location, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Retrieves a list of data streams associated with the specified feed
                 * @method getDatastreams
                 * @async
                 * @param {String} id Feed ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDatastreams : function(id,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams&quot;,id), onSuccess : cbS, onError: cbE});	        	
                },
                /**
                 * Updates a data stream associated with the specified feed (if a stream with this name does not exist it gets created).
                 * @method updateStream
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Object} stream Create/Update parameters: unit and type. See https://m2x.att.com/developer/documentation/feed#Create-Update-Data-Stream for details.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                updateStream : function(id,name,stream,cbS,cbE) {
                    
                    var body = stream, onSuccess = cbS, onError = cbE;
                    if (Utils.isFunc(stream)) {
                        body = {};
                        onSuccess = stream;
                        onError = cbS;
                    }
                    
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}&quot;,id,name), body : body, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Updates the current stream value of the specified stream
                 * @method updateDataStreamValue
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Object} value Should contain a value property with the new stream value. Timestamp can be optionally provided by adding the &#x27;at&#x27; property in the object.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                updateDataStreamValue : function(id,name,value,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }

                    Utils.checkObjectHasProperties(value,[&#x27;value&#x27;]);
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}/value&quot;,id,name), body : value, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Gets details of a specific data stream associated with an existing feed.
                 * @method getDataStreamDetails
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDataStreamDetails : function (id,name,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
                },
                /**
                 * List values from an existing data stream associated with a specific feed, sorted in reverse chronological order (most recent values first).
                 * @method getDataStreamValues
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Object} [options] Filter options. See https://m2x.att.com/developer/documentation/feed#List-Data-Stream-Values for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDataStreamValues :  function(id,name,options,cbS,cbE) {
                    var urlparams = options,
                        onSuccess = cbS,
                        onError = cbE;
                    
                    if (Utils.isFunc(urlparams)) {
                        urlparams = {};
                        onSuccess = options;
                        onError = cbS;
                    }
                    
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}/values.json&quot;,id,name), urlparams: urlparams, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Return count, min, max, average and standard deviation stats for the values on an existing data stream. &lt;br&gt;Note: This endpoint &lt;b&gt;only&lt;/b&gt; works for numeric streams.
                 * @method getDataStreamStats
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Object} [options] Filter options. See https://m2x.att.com/developer/documentation/feed#Data-Stream-Stats for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDataStreamStats : function(id,name,options,cbS,cbE) {
                    var urlparams = options,
                        onSuccess = cbS,
                        onError = cbE;
                    
                    if (Utils.isFunc(urlparams)) {
                        urlparams = {};
                        onSuccess = options;
                        onError = cbS;
                    }
                    
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}/stats&quot;,id,name), urlparams: urlparams, onSuccess : onSuccess, onError: onError});
                },
                /**
                 * Posts timestamped values to an existing data stream associated with a specific feed.
                 * @method postDataStreamValues
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Array} values An array of objects. Each object should contain the attributes &#x27;at&#x27; (timestamp in ISO8601 format) and &#x27;value&#x27;.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                postDataStreamValues : function(id,name,values,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    if (Utils.isArray(values)) {
                        values.forEach(function(v) {
                            Utils.checkObjectHasProperties(v,[&#x27;at&#x27;,&#x27;value&#x27;]);
                        });
                    } else {
                        throw new Error(&quot;Values should be an array of objects&quot;);
                    }
                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}/values&quot;,id,name), body : {values: values}, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Deletes values in a stream by a date range.
                 * @method deleteDataStreamValues
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
                 * @param {Object} range An object containing the date range. An error will be thrown if &#x27;from&#x27; (timestamp in ISO 8601 format) or &#x27;end&#x27; (timestamp in ISO 8601 format) are not provided.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                deleteDataStreamValues :  function(id,name,parameters,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    Utils.checkObjectHasProperties(parameters,[&#x27;from&#x27;,&#x27;end&#x27;]);
                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}/values&quot;,id,name), body : parameters, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Deletes an existing data stream associated with a specific feed.
                 * @method deleteDataStream
                 * @async
                 * @param {String} id Feed ID
                 * @param {String} name Data stream name
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                deleteDataStream : function(id,name,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(name) || name.indexOf(&#x27; &#x27;) &gt;= 0) {
                        throw new Error(&quot;Stream name should be a string and not include spaces&quot;);
                    }
                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/feeds/{1}/streams/{2}&quot;,id,name), onSuccess : cbS, onError: cbE});
                },
                /**
                 * Posts values to multiple streams at once.
                 * @method postMultipleValues 
                 * @async
                 * @method postMultipleValues
                 * @param {String} id Feed ID 
                 * @param {Object} values  An object with one attribute per each stream to be updated. The value of each one of these attributes is an array of timestamped values. See https://m2x.att.com/developer/documentation/feed#Post-Multiple-Values-to-Multiple-Streams for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                postMultipleValues : function(id,values,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/feeds/{1}&quot;,id), body : {values: values}, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Retrieves a list of triggers associated with the specified feed.
                 * @method getTriggers
                 * @async
                 * @param {String} id Feed ID 
                 * @param {Object} [options]  Search options. See https://m2x.att.com/developer/documentation/feed#List-Triggers for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getTriggers : function(id,options,cbS,cbE) {
                    var urlparams = options,
                        onSuccess = cbS,
                        onError = cbE;
                
                    if (Utils.isFunc(urlparams)) {
                        urlparams = {};
                        onSuccess = options;
                        onError = cbS;
                    }

                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers&quot;,id), urlparams: urlparams, onSuccess : onSuccess, onError: onError});	        	
                },
                /**
                 * Creates a new trigger associated with the specified feed.
                 * @method createTrigger
                 * @async
                 * @param {String} id Feed ID 
                 * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                createTrigger : function(id,trigger,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }

                    Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers&quot;,id), body : trigger, onSuccess : cbS, onError: cbE});
                    
                },
                /**
                 * Gets details of a specific trigger associated with an existing feed.
                 * @method getTriggerDetails
                 * @async
                 * @param {String} id Feed ID 
                 * @param {String} trigger_id Trigger ID. 
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getTriggerDetails : function(id,triggerId,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers/{2}&quot;,id,triggerId),onSuccess : cbS, onError: cbE});
                },
                /**
                 * Updates an existing trigger associated with the specified feed.
                 * @method updateTrigger
                 * @async
                 * @param {String} id Feed ID 
                 * @param {String} trigger_id Trigger ID. 
                 * @param {Object} trigger Trigger object. An error will be thrown if stream(String), condition(String), value(Number), name(String) or callback_url(String) are not provided.
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                updateTrigger : function(id,triggerId,trigger,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    Utils.checkObjectHasProperties(trigger,[&#x27;stream&#x27;,&#x27;condition&#x27;,&#x27;value&#x27;,&#x27;name&#x27;,&#x27;callback_url&#x27;]);
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers/{2}&quot;,id,triggerId), body : trigger, onSuccess : cbS, onError: cbE});
                },
                /**
                 * Tests the specified trigger by firing it with a fake value. See https://m2x.att.com/developer/documentation/feed#Test-Trigger for details
                 * @method testTrigger
                 * @async
                 * @param {String} id Feed ID 
                 * @param {String} trigger_id Trigger ID. 
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                testTrigger : function(id,triggerId,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(triggerId)) {
                        throw new Error(&quot;Trigger ID should be an string&quot;);
                    }

                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers/{2}/test&quot;,id,triggerId), onSuccess : cbS, onError: cbE});        	
                },
                /**
                 * Deletes an existing trigger associated with a specific feed.
                 * @method deleteTrigger
                 * @async
                 * @param {String} id Feed ID 
                 * @param {String} trigger_id Trigger ID. 
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                deleteTrigger : function(id,triggerId,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    if (!Utils.isString(triggerId)) {
                        throw new Error(&quot;Trigger ID should be an string&quot;);
                    }
                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/feeds/{1}/triggers/{2}&quot;,id,triggerId), onSuccess: cbS, onError: cbE});
                },
                /**
                 * Retrieves a list of HTTP requests received lately by the specified feed (up to 100 entries).
                 * @method getRequestsLog
                 * @async
                 * @param {String} id Feed ID 
                 * @param {Object} [options] Search options. 
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getRequestsLog :  function(id,options,cbS,cbE) {
                    var urlparams = options,
                        onSuccess = cbS,
                        onError = cbE;
            
                    if (Utils.isFunc(urlparams)) {
                        urlparams = {};
                        onSuccess = options;
                        onError = cbS;
                    }

                    if (!Utils.isString(id)) {
                        throw new Error(&quot;ID should be an string&quot;);
                    }
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/feeds/{1}/log&quot;,id), urlparams : urlparams, onSuccess: onSuccess, onError: onError});	        	
                }
        }

        /**
         * M2X Key API facade
         * @class M2X.key
         *
         */
        api.key = {
        		/**
        		 * Retrieves a list of keys associated with the specified account.
        		 * @method search
        		 * @async
        		 * @param {String} [feed]  It will list all the keys that are associated with that specific feed or its streams
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
        		 */
                search : function(feed,cbS,cbE) {
                    var urlparams = {feed : feed},
                        onSuccess = cbS,
                        onError = cbE;
            
                    if (Utils.isFunc(feed)) {
                        urlparams = {};
                        onSuccess = feed;
                        onError = cbS;
                    }
            
                    request({verb:&quot;GET&quot;, path: &quot;/keys&quot;, urlparams : urlparams, onSuccess: onSuccess, onError: onError});	        	
                },
                /**
                 * Creates a new key associated with the specified account.
                 * @method create
                 * @async
                 * @param {Object} key Key object. An error will be thrown if name(String) or permissions(Array) are not provided. See https://m2x.att.com/developer/documentation/keys#Create-Key for details
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                create : function (key,cbS,cbE) {
                    if (!Utils.isObj(key)) {
                        throw new Error(&quot;Key should be an object&quot;);
                    }
            
                    Utils.checkObjectHasProperties(key,[&#x27;name&#x27;,&#x27;permissions&#x27;]);
                    
                    request({verb:&quot;POST&quot;, path: &quot;/keys&quot;, body: key, onSuccess: cbS, onError: cbE}); 
                },
                /**
                 * Gets details of a specific key associated with a developer account.
                 * @method getDetails
                 * @async
                 * @param {String} key Key ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
                 */
                getDetails : function(key,cbS,cbE) {
                    if (!Utils.isString(key)) {
                        throw new Error(&quot;Key should be a String&quot;);
                    }
            
                    request({verb:&quot;GET&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,key), onSuccess: cbS, onError: cbE});
                },
                /**
                 * Update name, stream, permissions, expiration date, origin or feed access of an existing key associated with the specified account
                 * @method update
                 * @async
	             * @param {String} key Key ID
                 * @param {Object} key Key object. An error will be thrown if name(String) or permissions(Array) are not provided
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails
	    	     *  
                 * Note: Do not include &#x60;key&#x60; in the Key object. Otherwise, M2X will return
                 * 		a 422(Unprocessable Entity) error with message &quot;Validation Failed&quot;,&quot;errors&quot;:{&quot;key&quot;:[&quot;unknown&quot;]}
                 */
                update : function(id,key,cbS,cbE) {
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;Key should be a String&quot;);
                    }
            
                    Utils.checkObjectHasProperties(key,[&#x27;name&#x27;,&#x27;permissions&#x27;]);
                    request({verb:&quot;PUT&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,id), body : key, onSuccess: cbS, onError: cbE});
                },
                /**
                 * Regenerates the specified key.
                 * @method regenerate
                 * @async
	             * @param {String} key Key ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails 
                 */
                regenerate : function(id,cbS,cbE){
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;Key should be a String&quot;);
                    }
            
                    request({verb:&quot;POST&quot;, path: Utils.formatURL(&quot;/keys/{1}/regenerate&quot;,id), onSuccess: cbS, onError: cbE});    		
                },
                /**
                 * Deletes an existing key.
                 * @method remove
                 * @async
	             * @param {String} key Key ID
	    	     * @param {Function} onSuccess Function to call back if operation is successful
	    	     * @param {Function} [onError] Function to call back if operation fails 
                 */
                remove : function(id,cbS,cbE){
                    if (!Utils.isString(id)) {
                        throw new Error(&quot;Key should be a String&quot;);
                    }
            
                    request({verb:&quot;DELETE&quot;, path: Utils.formatURL(&quot;/keys/{1}&quot;,id), onSuccess: cbS, onError: cbE});
                }
        }

        /**
         * Updates the M2X API key currently used by this instance
         * @method setKey
         * @for M2X
         * @param {String} key Key ID. An error will be thrown if key is not a string
         */
        api.setKey = function(key) {
        	if (!Utils.isString(key)) {
        		throw new Error(&quot;Key ID should be a String&quot;);
        	}
        		
        	cfg.key = key;
        }
        
        return api;
   };
        
   /**
    * Creates a Date instance from a ISO8601 date
    * @method fromISO8601toDate 
    * @static
    * @for M2X
    * @param {String} timestamp A date in ISO8601 format
    * @return {Date} Date object if parameter is valid, undefined otherwise
    */
    M2XAPI.fromISO8601toDate = function(timestamp) {
    	var ISO8601Format = /\d{4}\-\d{2}\-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/;
    	if (ISO8601Format.test(timestamp)) {
    		return new Date(timestamp);
    	}
    };

    /**
     * Returns a date in ISO8601 format
     * @method getISO8601Timestamp 
     * @static
     * @for M2X
     * @param {Mixed} [timestamp] Either a Date instance or a number(integer)
     * @return {String} ISO8601 date. If no timestamp is provided, current time/date will be returned
     */    
    M2XAPI.getISO8601Timestamp = function(timestamp) {
    	var t;
    	if (Object.prototype.toString.call(timestamp) === &#x27;[object Date]&#x27; 
    		|| (typeof timestamp === &#x27;number&#x27; &amp;&amp; timestamp === (timestamp | 0))) {
    		t = timestamp;
    	} else {
    		t = new Date.now();
    	}
    	return t.toISOString();
    };

    return M2XAPI;

}));
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
